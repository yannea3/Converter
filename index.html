<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Baking Helper</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1, h2 {
      text-align: center;
    }
    label {
      font-weight: bold;
    }
    input, select, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 15px;
    }
    .section {
      margin-bottom: 40px;
    }
    .result {
      font-weight: bold;
      font-size: 1.2em;
    }
  </style>
</head>
<body>

  <h1>Baking Helper</h1>

  <!-- Unit Converter -->
  <div class="section">
    <h2>Unit Converter</h2>
    <label for="unitValue">Enter value:</label>
    <input type="number" id="unitValue" step="any" placeholder="e.g. 1100">

    <label for="unitFrom">Convert from:</label>
    <select id="unitFrom">
      <option value="grams">Grams</option>
      <option value="ml">Milliliters</option>
      <option value="cups">Cups</option>
      <option value="tbsp">Tablespoons</option>
      <option value="tsp">Teaspoons</option>
    </select>

    <label for="unitTo">Convert to:</label>
    <select id="unitTo">
      <option value="grams">Grams</option>
      <option value="ml">Milliliters</option>
      <option value="cups">Cups</option>
      <option value="tbsp">Tablespoons</option>
      <option value="tsp">Teaspoons</option>
    </select>

    <label for="ingredient">Ingredient (for density):</label>
    <select id="ingredient">
      <option value="flour">Flour</option>
      <option value="sugar">Sugar</option>
      <option value="butter">Butter</option>
      <option value="water">Water</option>
      <option value="milk">Milk</option>
    </select>

    <button onclick="convert()">Convert</button>
    <p class="result" id="conversionResult"></p>
  </div>

  <!-- Recipe Scaler -->
  <div class="section">
    <h2>Recipe Scaler</h2>
    <p>This will scale your own custom recipe based on how much flour you have.</p>

    <label for="origFlour">Original recipe - Flour (g):</label>
    <input type="number" id="origFlour" placeholder="e.g. 2000" />

    <label for="origYeast">Original recipe - Yeast (g):</label>
    <input type="number" id="origYeast" placeholder="e.g. 20" />

    <label for="origSugar">Original recipe - Sugar (g):</label>
    <input type="number" id="origSugar" placeholder="e.g. 400" />

    <label for="origSalt">Original recipe - Salt (g):</label>
    <input type="number" id="origSalt" placeholder="e.g. 24" />

    <label for="origWater">Original recipe - Water (ml):</label>
    <input type="number" id="origWater" placeholder="e.g. 1120" />

    <label for="origShortening">Original recipe - Shortening (g):</label>
    <input type="number" id="origShortening" placeholder="e.g. 120" />

    <label for="origYield">Original recipe - Estimated breads:</label>
    <input type="number" id="origYield" placeholder="e.g. 123" />

    <label for="flour">How much flour do you have? (grams)</label>
    <input type="number" id="flour" placeholder="e.g. 400" />

    <button onclick="scaleRecipe()">Scale Recipe</button>

    <p class="result" id="scaledRecipe"></p>
  </div>

  <script>
  function decimalToFraction(value) {
    const tolerance = 1e-2;
    let h1 = 1, h2 = 0, k1 = 0, k2 = 1;
    let b = value;
    do {
      let a = Math.floor(b);
      let aux = h1; h1 = a * h1 + h2; h2 = aux;
      aux = k1; k1 = a * k1 + k2; k2 = aux;
      b = 1 / (b - a);
    } while (Math.abs(value - h1 / k1) > value * tolerance);
    if (k1 <= 9) return `${h1}/${k1}`;
    return null;
  }

  function convert() {
    const value = parseFloat(document.getElementById('unitValue').value);
    const from = document.getElementById('unitFrom').value;
    const to = document.getElementById('unitTo').value;
    const ingredient = document.getElementById('ingredient').value;

    if (isNaN(value) || value <= 0) {
      document.getElementById("conversionResult").innerText = "Please enter a valid amount.";
      return;
    }

    const densities = {
      flour: 0.53,
      sugar: 0.85,
      butter: 0.96,
      water: 1.00,
      milk: 1.03
    };

    const volumeUnits = {
      ml: 1,
      cups: 240,
      tbsp: 15,
      tsp: 5
    };

    let result = 0;

    if (from === to) {
      result = value;
    } else if (from === "grams" && to in volumeUnits) {
      const mlValue = value / densities[ingredient];
      result = mlValue / volumeUnits[to];
    } else if (to === "grams" && from in volumeUnits) {
      const mlValue = value * volumeUnits[from];
      result = mlValue * densities[ingredient];
    } else if (from in volumeUnits && to in volumeUnits) {
      const mlValue = value * volumeUnits[from];
      result = mlValue / volumeUnits[to];
    } else {
      document.getElementById("conversionResult").innerText = "Unsupported conversion.";
      return;
    }

    const fraction = decimalToFraction(result);
    const text = fraction
      ? `${result.toFixed(2)} or ${fraction} ${to}`
      : `${result.toFixed(2)} ${to}`;
    document.getElementById("conversionResult").innerText = text;
  }

  function scaleRecipe() {
    const origFlour = parseFloat(document.getElementById('origFlour').value);
    const flour = parseFloat(document.getElementById('flour').value);
    const yeast = parseFloat(document.getElementById('origYeast').value);
    const sugar = parseFloat(document.getElementById('origSugar').value);
    const salt = parseFloat(document.getElementById('origSalt').value);
    const water = parseFloat(document.getElementById('origWater').value);
    const shortening = parseFloat(document.getElementById('origShortening').value);
    const yieldCount = parseFloat(document.getElementById('origYield').value);

    if (
      !origFlour || !flour || origFlour <= 0 || flour <= 0 ||
      isNaN(yeast) || isNaN(sugar) || isNaN(salt) || isNaN(water) || isNaN(shortening) || isNaN(yieldCount)
    ) {
      document.getElementById('scaledRecipe').innerText = "Please fill in all fields with valid numbers.";
      return;
    }

    const factor = flour / origFlour;

    const scaledYeast = (yeast * factor).toFixed(1);
    const scaledSugar = (sugar * factor).toFixed(1);
    const scaledSalt = (salt * factor).toFixed(1);
    const scaledWater = (water * factor).toFixed(1);
    const scaledShortening = (shortening * factor).toFixed(1);
    const scaledYield = Math.floor(yieldCount * factor);

    document.getElementById('scaledRecipe').innerHTML =
      `<strong>Adjusted Ingredients:</strong><br>
      - Flour: ${flour} g<br>
      - Yeast: ${scaledYeast} g<br>
      - Sugar: ${scaledSugar} g<br>
      - Salt: ${scaledSalt} g<br>
      - Water: ${scaledWater} ml<br>
      - Shortening: ${scaledShortening} g<br>
      <br><strong>Estimated Yield:</strong> ${scaledYield} bread(s)`;
  }
</script>
</body>
</html>

