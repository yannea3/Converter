<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flour & Bread Helper</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    h2 {
      margin-top: 40px;
      color: #444;
    }
    label, input, button {
      display: block;
      margin: 10px 0;
      width: 100%;
    }
    .result {
      margin-top: 10px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>Flour & Bread Helper</h1>

  <h2>Unit Converter</h2>
  <label for="gramsInput">Enter grams of flour or butter:</label>
  <input type="text" id="gramsInput" placeholder="e.g. 1100 grams of flour">
  <button onclick="convertGramsToCups()">Convert</button>
  <div id="converterResult" class="result"></div>

  <h2>Recipe Scaler</h2>
  <label for="flourInput">Enter flour amount (grams):</label>
  <input type="number" id="flourInput" placeholder="e.g. 400">
  <button onclick="scaleRecipe()">Scale Recipe</button>
  <div id="scalerResult" class="result"></div>

  <script>
    function decimalToFraction(decimal) {
      if (decimal >= 10) return decimal.toFixed(2);

      const whole = Math.floor(decimal);
      const frac = decimal - whole;
      let fraction = "";

      const fractions = [
        [1/8, "⅛"],
        [1/4, "¼"],
        [1/3, "⅓"],
        [3/8, "⅜"],
        [1/2, "½"],
        [5/8, "⅝"],
        [2/3, "⅔"],
        [3/4, "¾"],
        [7/8, "⅞"]
      ];

      for (let [dec, sym] of fractions) {
        if (Math.abs(frac - dec) < 0.05) {
          fraction = sym;
          break;
        }
      }

      return whole ? `${whole}${fraction ? " " + fraction : ""}` : fraction || decimal.toFixed(2);
    }

    function convertGramsToCups() {
      const input = document.getElementById("gramsInput").value.toLowerCase();
      const resultEl = document.getElementById("converterResult");

      const match = input.match(/(\d+\.?\d*)\s*grams?\s+of\s+(flour|butter)/);
      if (!match) {
        resultEl.textContent = "Please enter a valid input like '1100 grams of flour'.";
        return;
      }

      const grams = parseFloat(match[1]);
      const ingredient = match[2];

      let gramsPerCup = ingredient === "butter" ? 227 : 120;
      let cups = grams / gramsPerCup;
      let approx = decimalToFraction(cups);

      resultEl.textContent = `Result: ${cups.toFixed(2)} or ${approx} cup/s`;
    }

    function scaleRecipe() {
      const flourGrams = parseFloat(document.getElementById("flourInput").value);
      const resultEl = document.getElementById("scalerResult");

      if (isNaN(flourGrams) || flourGrams <= 0) {
        resultEl.textContent = "Please enter a valid amount of flour.";
        return;
      }

      const originalFlour = 1120; // grams
      const originalBreads = 123;

      const factor = flourGrams / originalFlour;
      const yeast = (16 * factor).toFixed(1);
      const sugar = (90 * factor).toFixed(1);
      const salt = (18 * factor).toFixed(1);
      const water = (720 * factor).toFixed(1);
      const breads = Math.round(originalBreads * factor);

      resultEl.innerHTML =
        `Scaled Recipe:
        <ul>
          <li>Flour: ${flourGrams}g</li>
          <li>Yeast: ${yeast}g</li>
          <li>Sugar: ${sugar}g</li>
          <li>Salt: ${salt}g</li>
          <li>Water: ${water}g</li>
        </ul>
        Estimated Output: ~${breads} breads`;
    }
  </script>
</body>
</html>
