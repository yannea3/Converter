<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kitchen Helper: Convert & Scale Recipes Easily</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      background: #f9f9f9;
    }
    h1 {
      text-align: center;
    }
    h2 {
      margin-top: 40px;
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 15px;
      box-sizing: border-box;
    }
    .result {
      font-weight: bold;
      background-color: #fff4cc;
      padding: 10px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <h1>Kitchen Helper: Convert & Scale Recipes Easily</h1>

  <!-- UNIT CONVERTER SECTION -->
  <h2>Unit Converter</h2>
  <label for="amount">Amount:</label>
  <input type="number" id="amount" placeholder="Enter value">

  <label for="fromUnit">From Unit:</label>
  <select id="fromUnit">
    <option value="grams">grams</option>
    <option value="milliliters">milliliters</option>
  </select>

  <label for="toUnit">To Unit:</label>
  <select id="toUnit">
    <option value="cups">cups</option>
    <option value="tablespoons">tablespoons</option>
    <option value="teaspoons">teaspoons</option>
  </select>

  <label for="ingredient">Ingredient (optional for better accuracy):</label>
  <select id="ingredient">
    <option value="">-- Select --</option>
    <option value="flour">Flour</option>
    <option value="sugar">Sugar</option>
    <option value="butter">Butter</option>
    <option value="water">Water</option>
    <option value="oil">Oil</option>
  </select>

  <button onclick="convertUnits()">Convert</button>
  <div id="conversionResult" class="result"></div>

  <!-- RECIPE SCALER SECTION -->
  <h2>Recipe Scaler</h2>
  <label for="newFlour">New Flour Amount (grams):</label>
  <input type="number" id="newFlour" placeholder="e.g. 400">

  <button onclick="scaleRecipe()">Scale Recipe</button>
  <div id="scaledRecipe" class="result"></div>

  <script>
    const densities = {
      flour: 120,
      sugar: 200,
      butter: 227,
      water: 236.6,
      oil: 218
    };

    function decimalToFraction(decimal) {
      const fractions = [
        { dec: 0.125, frac: '⅛' },
        { dec: 0.25, frac: '¼' },
        { dec: 0.33, frac: '⅓' },
        { dec: 0.5, frac: '½' },
        { dec: 0.66, frac: '⅔' },
        { dec: 0.75, frac: '¾' },
        { dec: 0.875, frac: '⅞' }
      ];
      for (let i = 0; i < fractions.length; i++) {
        if (Math.abs(decimal - fractions[i].dec) < 0.05) {
          return fractions[i].frac;
        }
      }
      return null;
    }

    function convertUnits() {
      const amount = parseFloat(document.getElementById('amount').value);
      const from = document.getElementById('fromUnit').value;
      const to = document.getElementById('toUnit').value;
      const ingredient = document.getElementById('ingredient').value.toLowerCase();

      if (isNaN(amount) || amount <= 0) {
        document.getElementById('conversionResult').innerText = "Please enter a valid number.";
        return;
      }

      let result = amount;
      let density = ingredient && densities[ingredient] ? densities[ingredient] : null;

      if ((from === "grams" || from === "milliliters") && to === "cups") {
        if (!density) {
          document.getElementById('conversionResult').innerText = "Please select a known ingredient to convert accurately.";
          return;
        }
        result = amount / density;
      } else if ((from === "grams" || from === "milliliters") && to === "tablespoons") {
        if (!density) {
          document.getElementById('conversionResult').innerText = "Please select a known ingredient to convert accurately.";
          return;
        }
        result = (amount / density) * 16;
      } else if ((from === "grams" || from === "milliliters") && to === "teaspoons") {
        if (!density) {
          document.getElementById('conversionResult').innerText = "Please select a known ingredient to convert accurately.";
          return;
        }
        result = (amount / density) * 48;
      }

      const whole = Math.floor(result);
      const decimal = result - whole;
      const frac = decimalToFraction(decimal);
      let pretty = result.toFixed(2);
      if (frac && result < 10) {
        pretty = `${whole > 0 ? whole : ''}${frac}`;
      }

      document.getElementById('conversionResult').innerText = `Result: ${result.toFixed(2)} or ${pretty} ${to}`;
    }

    function scaleRecipe() {
      const original = 2000;
      const newFlour = parseFloat(document.getElementById("newFlour").value);

      if (isNaN(newFlour) || newFlour <= 0) {
        document.getElementById("scaledRecipe").innerText = "Please enter a valid amount of flour.";
        return;
      }

      const factor = newFlour / original;

      const yeast = 20 * factor;
      const sugar = 400 * factor;
      const salt = 24 * factor;
      const water = 1120 * factor;
      const shortening = 160 * factor;

      document.getElementById("scaledRecipe").innerHTML =
        `Adjusted Recipe for ${newFlour}g Flour:<br>
        Yeast: ${yeast.toFixed(1)} g<br>
        Sugar: ${sugar.toFixed(1)} g<br>
        Salt: ${salt.toFixed(1)} g<br>
        Water: ${water.toFixed(1)} ml<br>
        Shortening: ${shortening.toFixed(1)} g`;
    }
  </script>
</body>
</html>
